(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f90b1c0"],{"00b4":function(t,e,a){"use strict";a("ac1f");var s=a("23e7"),n=a("da84"),r=a("c65b"),i=a("e330"),o=a("1626"),c=a("861d"),u=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),d=n.Error,l=i(/./.test);s({target:"RegExp",proto:!0,forced:!u},{test:function(t){var e=this.exec;if(!o(e))return l(this,t);var a=r(e,this,t);if(null!==a&&!c(a))throw new d("RegExp exec method returned something other than an Object or null");return!!a}})},2909:function(t,e,a){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function n(t){if(Array.isArray(t))return s(t)}a.d(e,"a",(function(){return c}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}a("fb6a"),a("b0c0"),a("ac1f"),a("00b4");function i(t,e){if(t){if("string"===typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||r(t)||i(t)||o()}},"4df4":function(t,e,a){"use strict";var s=a("da84"),n=a("0366"),r=a("c65b"),i=a("7b0b"),o=a("9bdd"),c=a("e95a"),u=a("68ee"),d=a("07fa"),l=a("8418"),m=a("9a1f"),p=a("35a1"),b=s.Array;t.exports=function(t){var e=i(t),a=u(this),s=arguments.length,_=s>1?arguments[1]:void 0,h=void 0!==_;h&&(_=n(_,s>2?arguments[2]:void 0));var f,v,g,x,C,q,w=p(e),y=0;if(!w||this==b&&c(w))for(f=d(e),v=a?new this(f):b(f);f>y;y++)q=h?_(e[y],y):e[y],l(v,y,q);else for(x=m(e,w),C=x.next,v=a?new this:[];!(g=r(C,x)).done;y++)q=h?o(x,_,[g.value,y],!0):g.value,l(v,y,q);return v.length=y,v}},"9bdd":function(t,e,a){var s=a("825a"),n=a("2a62");t.exports=function(t,e,a,r){try{return r?e(s(a)[0],a[1]):e(a)}catch(i){n(t,"throw",i)}}},a630:function(t,e,a){var s=a("23e7"),n=a("4df4"),r=a("1c7e"),i=!r((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:i},{from:n})},d28b:function(t,e,a){var s=a("746f");s("iterator")},eaad:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"messages-page chat-feature-page"},[a("section",{staticClass:"center-view"},[a("message-inbox"),a("message-window")],1)])},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"message-inbox"},[t._m(0),a("div",{staticClass:"message-inbox_personal"},t._l(t.users,(function(e){return a("div",{key:e.id,staticClass:"message-inbox_personal_list"},[a("router-link",{staticClass:"d-flex",attrs:{to:{name:"messages-to-user",params:{id:e.id}}}},[a("span",{staticClass:"avatar-container"},[a("router-link",{attrs:{to:{name:"user",params:{id:e.id}}}},[a("img",{staticClass:"message-inbox_avatar avatar-50",attrs:{src:e.avatar,alt:""}})])],1),a("div",{staticClass:"message-inbox_block d-flex-col"},[a("div",{staticClass:"message-inbox_name d-flex"},[a("span",{staticClass:"d-flex"},[a("p",{staticClass:"user-name-text",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.toUserPage(e.id)}}},[t._v(" "+t._s(e.name)+" ")]),a("p",{staticClass:"user-account-text"},[t._v(" "+t._s(t._f("accountTag")(e.account))+" ")])]),a("span",{staticClass:"message-inbox_name_date"},[a("p",{staticClass:"user-account-text"},[t._v(" "+t._s(t._f("fromNow")(e.latestMessage.createdAt))+" ")])])]),a("span",{staticClass:"message-inbox_content"},[a("p",{staticClass:"user-account-text message-inbox_content_text"},[t._v(" "+t._s(e.latestMessage.content)+" ")])])])])],1)})),0)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"banner page-name-banner"},[a("div",{staticClass:"banner__other-page message-inbox_banner d-flex"},[a("span",{staticClass:"banner__other-page__info"},[a("h2",[t._v("訊息")])]),a("div",{staticClass:"message-inbox_icon"})])])}],o=a("2708"),c={userData:[{id:8,name:"Apple",account:"apple",avatar:"https://randomuser.me/api/portraits/women/6.jpg",latestMessage:{content:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad esse dolore sequi aliquid, voluptates maxime dolorum ea facere enim impedit necessitatibus, non magni amet modi molestias perspiciatis adipisci assumenda quo!",createdAt:"2021-12-10T11:09:34.000Z"}},{id:10,name:"Orange",account:"orange",avatar:"https://randomuser.me/api/portraits/women/6.jpg",latestMessage:{content:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad esse dolore sequi aliquid, voluptates maxime dolorum ea facere enim impedit necessitatibus, non magni amet modi molestias perspiciatis adipisci assumenda quo!",createdAt:"2021-12-08T11:09:34.000Z"}}]},u={name:"message-inbox",mixins:[o["b"],o["a"]],data:function(){return{users:[{id:-1,name:"",account:"",avatar:"",content:"",createdAt:""}]}},created:function(){this.fetchUserMessages()},methods:{fetchUserMessages:function(){this.users=c.userData},toUserPage:function(t){this.$router.push({name:"user",params:{id:t}})}}},d=u,l=a("2877"),m=Object(l["a"])(d,r,i,!1,null,null,null),p=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"message-window"},[a("div",{staticClass:"chatroom-banner"},[a("h2",[t._v("Name Link")]),a("div",{staticClass:"chatroom-banner__account"},[t._v(" "+t._s(t._f("accountTag")(t.currentUser.account))+" ")])]),a("div",{staticClass:"message-container"},t._l(t.chatBubbles,(function(e){return a("div",{key:e.data.eventId,staticClass:"message-container__chat-bubble"},[e.data.user.id!==t.currentUser.id?a("div",{staticClass:"message-container__chat-bubble__received-message"},[a("img",{staticClass:"message-container__chat-bubble__received-message__avatar",attrs:{src:e.data.user.avatar}}),a("div",{staticClass:"\n            message-container__chat-bubble__received-message__info-wrapper\n          "},[a("div",{staticClass:"\n              message-container__chat-bubble__received-message__info-wrapper__chat-content\n            "},[t._v(" "+t._s(e.data.content)+" ")]),a("div",{staticClass:"\n              message-container__chat-bubble__received-message__info-wrapper__time\n            "},[t._v(" "+t._s(t._f("timeFormatToShort")(e.data.createdAt))+" ")])])]):t._e(),e.data.user.id===t.currentUser.id?a("div",{staticClass:"message-container__chat-bubble__message-sent"},[a("div",{staticClass:"message-container__chat-bubble__message-sent__chat-content"},[t._v(" "+t._s(e.data.content)+" ")]),a("div",{staticClass:"message-container__chat-bubble__message-sent__time"},[t._v(" "+t._s(t._f("timeFormatToShort")(e.data.createdAt))+" ")])]):t._e()])})),0),a("div",{staticClass:"chat-input-box"},[a("form",{staticClass:"chat-input-box__form",attrs:{action:""},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleFormSubmit.apply(null,arguments)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.chatInput,expression:"chatInput"}],staticClass:"chat-input-box__form__input",attrs:{type:"text",placeholder:"輸入訊息 ..."},domProps:{value:t.chatInput},on:{input:function(e){e.target.composing||(t.chatInput=e.target.value)}}}),a("button",{staticClass:"chat-input-box__form__send-btn",attrs:{type:"submit"}})])])])},_=[],h=a("2909"),f=a("5530"),v=(a("d81d"),a("2f62")),g={message:{eventId:2,content:"Distinctio accusamus quo, qui aliquam doloremque voluptates itaque cupiditate porro.",createdAt:new Date,user:{id:7,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}},historyMessages:[{chatId:4,content:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laboriosam, ratione. Distinctio accusamus quo, qui aliquam doloremque voluptates itaque cupiditate porro.",createdAt:new Date,user:{id:7,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}},{chatId:4,content:"Lorem, ipsum dolor sit amet consectetur adipisicing elit porro.",createdAt:new Date,user:{id:3,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}},{chatId:5,content:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laboriosam, ratione. Distinctio accusamus quo, qui aliquam doloremque voluptates itaque cupiditate porro.",createdAt:new Date,user:{id:11,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}},{chatId:6,content:"Lorem, ipsum dolor sit ametratione. Distinctio accusamus quo, qui aliquam doloremque voluptates itaque cupiditate porro.",createdAt:new Date,user:{id:3,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}},{chatId:4,content:"Distinctio accusamus quo, qui aliquam doloremque voluptates itaque cupiditate porro.",createdAt:new Date,user:{id:3,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}},{chatId:7,content:"Lorem, ratione stinctio accusamus quo, qui aliquam doloremque voluptates itaque cupiditate porro.",createdAt:new Date,user:{id:25,avatar:"https://randomuser.me/api/portraits/men/36.jpg"}}]},x={mixins:[o["b"],o["f"],o["a"]],data:function(){return{chatBubbles:[],chatInput:""}},computed:Object(f["a"])({},Object(v["b"])(["currentUser"])),created:function(){var t=this.currentUser.id;this.fetchMessages(t),this.socketSubscribeGetMessage()},methods:{fetchMessages:function(t){var e;console.log("現在的使用者 id-".concat(t));var a=g.historyMessages.map((function(t){return{bubbleType:"message",data:Object(f["a"])(Object(f["a"])({},t),{},{eventId:t.chatId})}}));(e=this.chatBubbles).push.apply(e,Object(h["a"])(a)),console.log(this.chatBubbles)},socketSubscribeGetMessage:function(){var t={bubbleType:"message",data:g.message};this.chatBubbles.push(t),console.log(this.chatBubbles)},handleFormSubmit:function(){console.log("送出訊息",this.chatInput);var t={bubbleType:"message",data:{eventId:-1,content:this.chatInput,createdAt:new Date,user:{avatar:this.currentUser.avatar,id:this.currentUser.id}}};this.chatBubbles.push(t),this.chatInput=""}}},C=x,q=Object(l["a"])(C,b,_,!1,null,null,null),w=q.exports,y={name:"Message",components:{MessageInbox:p,MessageWindow:w}},A=y,I=Object(l["a"])(A,s,n,!1,null,null,null);e["default"]=I.exports},fb6a:function(t,e,a){"use strict";var s=a("23e7"),n=a("da84"),r=a("e8b5"),i=a("68ee"),o=a("861d"),c=a("23cb"),u=a("07fa"),d=a("fc6a"),l=a("8418"),m=a("b622"),p=a("1dde"),b=a("f36a"),_=p("slice"),h=m("species"),f=n.Array,v=Math.max;s({target:"Array",proto:!0,forced:!_},{slice:function(t,e){var a,s,n,m=d(this),p=u(m),_=c(t,p),g=c(void 0===e?p:e,p);if(r(m)&&(a=m.constructor,i(a)&&(a===f||r(a.prototype))?a=void 0:o(a)&&(a=a[h],null===a&&(a=void 0)),a===f||void 0===a))return b(m,_,g);for(s=new(void 0===a?f:a)(v(g-_,0)),n=0;_<g;_++,n++)_ in m&&l(s,n,m[_]);return s.length=n,s}})}}]);
//# sourceMappingURL=chunk-4f90b1c0.e82a535e.js.map